{% extends 'base.html' %}

{% block title %}E-Mail-Adressen{% endblock %}

{% block description %}
    Deine primäre E-Mail-Adresse wird für die Anmeldung benötigt. Füge weitere
    E-Mail-Adressen hinzu, um Abos bestellen zu können, die nur für gewisse
    Adressen erhältlich sind.
{% endblock %}

{% block content %}
    <div id="email-addresses">
        <a class="button success" href="{% url 'email_address_create' %}">Neue E-Mail-Adresse</a>

        {% for email_address in email_addresses %}
            <div class="email-address">

                <h3>{{ email_address.email }}</h3>

                {# Badges #}
                <p>
                    {% if email_address.verified_at == None %}
                        <span class="badge danger">Nicht verifiziert</span>
                    {% endif %}
                    {% if email_address.is_primary %}
                        <span class="badge success">Primäre E-Mail-Adresse</span>
                    {% endif %}
                </p>

                {% if email_address.verified_at %}
                    <p>Zuletzt verifiziert am {{ email_address.verified_at|date:'d. F Y' }}</p>
                {% endif %}

                {# Actions #}
                {% if email_address.verified_at != None %}
                    <a href="{% url 'email_address_send_verification' email_address.pk %}">Erneut verifizieren</a>
                {% else %}
                    <a href="{% url 'email_address_send_verification' email_address.pk %}">Verifizieren</a>
                {% endif %}

                {% if not email_address.is_primary and email_address.verified_at != None %}
                    <a href="{% url 'email_address_set_primary' email_address.pk %}">Zur primären E-Mail-Adresse machen</a>
                {% endif %}

                {% if not email_address.is_primary %}
                    <a href="{% url 'email_address_delete' email_address.pk %}">Löschen</a>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% endblock %}
